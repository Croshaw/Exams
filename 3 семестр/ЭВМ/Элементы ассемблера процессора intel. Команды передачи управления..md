[[ЭВМ|<==]]
![[Элементы ассемблера процессора intel. Директивы сегментации программы, определения данных.#Элементы ассемблера процессора intel]]
# Команды передачи управления
В линейных программах нужный порядок выполнения команд обеспечивается за счет автоматического увеличения содержимого регистра **IP** на длину выполняемой команды. Организация ветвлений основана на пропуске групп команд. Организация цикла связана с возвратом к команде, начинающей цикл, которая ранее уже хотя бы один раз была выполнена. Для организации ветвлений и циклов необходимо принудительно изменить линейный порядок выполнения команд программы. Для этого в системе команд процессора i8086 предусмотрены команды, которые называются **командами перехода**. Применяется также другое название: **команды передачи управления**, так как можно считать, что управление процессором передается на другой участок программы или в общем случае — другой программе.
В ассемблерном формате кроме мнемокода команды переходов содержат либо указатель (`jmp АООО : 0100`), либо метку (`jmp М1`) той команды, к которой нужно выполнить переход.
## Классификация переходов
Переходы бывают **межсегментными** и **внутрисегментными**. Внутрисегментные переходы, в свою очередь, делятся на **близкие** и **короткие**. Для организации межсегментных переходов заменяется и содержимое регистра **IP**, и содержимое регистра **CS**. Именно вследствие замены содержимого **CS** и происходит переход из сегмента, в котором находится команда перехода, в другой сегмент, начинающийся в другом месте, с другого адреса. Отсюда и название таких переходов — межсегментные, или **дальние** переходы.
Во время выполнения внутрисегментных переходов содержимое регистра **CS** не изменяется, меняется только содержимое регистра **IP**. Адрес такого перехода занимает в команде один или два байта. Если он занимает два байта, то переход считается **близким**. Близкий переход осуществляется в пределах сегмента, содержащего команду перехода, то есть в пределах 64 Кбайт. Если адрес перехода занимает в команде только один байт, то переход считается **коротким**. Короткий переход возможен только на расстояния, не превышающие 255 байтов. Дальние указатели имеют длину 4 байта, ближние — 2 байта и короткие — 1 байт. 
Вне зависимости от дальности различают переходы безусловные и условные. Безусловные передачи управления производятся в любом случае, независимо ни от каких условий, а условные — только при выполнении заданных в команде условий.
### Безусловные переходы
Команда безусловного перехода имеет мнемокод `jmp`. Для организации безусловного перехода в регистры **CS** и **IP** (или только **IP**) загружается их новое содержимое, то есть новый указатель. При этом их старое содержимое — старый указатель — безвозвратно теряется. Это значит, что после совершения перехода восстановить точку программы, из которой он был совершен, невозможно.
### Условные переходы
Команды условного перехода анализируют состояние определенных флажков процессора, и если это состояние удовлетворяет заданному в команде условию, то происходит передача управления по находящемуся в команде указателю.

Таблица 1. Условные переходы

| Название                             | Мнемокод    | Условие             | Флажки                                      |
| ------------------------------------ | ----------- | ------------------- | ------------------------------------------- |
| Если равно/Если нуль                 | `je`/`jz`   | $=$ / $0$           | **ZF** = 1                                  |
| Если не равно/Если не нуль           | `jne`/`jnz` | $\neq$ / $\neq$ $0$ | **ZF** = 0                                  | 
| Если меньше/Если не больше или равно | `jl`/`jnge` | $<$ / $\not\geq$    | **SF** $\oplus$ **OF** = 1                  |
| Если не меньше/Если больше или равно | `jnl`/`jge` | $\not<$ / $\geq$    | **SF** $\oplus$ **OF** = 0                  |
| Если больше/Если не меньше или равно | `jg`/`jnle` | $>$ / $\not\leq$    | (**SF** $\oplus$ **OF**) $\lor$ **ZF**  = 0 |
| Если не больше/Если меньше или равно | `jng`/`jle` | $\not>$ / $\leq$    | (**SF** $\oplus$ **OF**) $\lor$ **ZF**  = 1 |
| Если выше/Если не ниже или равны     | `ja`/`jnbe` |                     | **CF** $\lor$ **ZF** = 0                    |
| Если ниже/Если не выше или равны     | `jb`/`jnae` |                     | **CF** = 1                                  |
