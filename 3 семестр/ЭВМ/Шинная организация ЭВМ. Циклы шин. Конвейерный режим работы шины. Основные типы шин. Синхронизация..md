[[ЭВМ|<==]]
# Шинная организация ЭВМ
Организация связи между устройствами компьютера по единственной общей шине оказалась довольно дешевым и простым вариантом архитектуры компьютера. Но одна шина могла удовлетворительно справляться с обменом до тех пор, пока быстродействие процессора, микросхем памяти, магнитных дисков и других устройств было относительно низким. По мере роста тактовых частот и объемов передаваемых данных общая шина компьютера стала «узким местом» архитектуры. В связи с этим начались работы по улучшению эффективности шин компьютера.
Основными техническими характеристиками шин являются разрядность, тактовая частота и производительность. Напомним, что разрядность определяется количеством проводов шины, по каждому из которых передается один бит адреса, один бит данных или один управляющий бит. Тактовая частота определяется как количество управляющих работой шины синхроимпульсов в секунду. Производительность равна количеству битов (или байтов), передаваемых по шине в единицу времени. Если, например, 16-битовая шина работает на частоте 100 МГц и выполняет передачу кода за один такт, то ее производительность равна $2$ байта * $10^8$ тактов/с = $190$ Мбайт/с. Не следует путать пропускные способности шины и памяти.
Один из возможных путей повышения производительности шины состоит в увеличении ее разрядности и тактовой частоты. Повышение разрядности приводит к увеличению геометрических размеров шины и, как следствие, к увеличению общей стоимости компьютера. Для уменьшения стоимости и размеров шины были разработаны различные варианты **мультиплексных** шин, в которых нет отдельных линий данных и линий адреса. Коды адресов и данных в таких шинах передаются по одним и тем же линиям. Сначала по шине передается адрес передаваемого кода, затем по тем же самым проводам передаются его биты. Такие шины, однако, обладают относительно невысокой производительностью.
Увеличение тактовой частоты шины может нарушить ее совместимость со старыми устройствами и с существующим программным обеспечением. Кроме того, это увеличение может привести к так называемому **перекосу** шины, который возникает при передаче данных по разным линиям шины с различной скоростью.
# Циклы шин
Шинам компьютера приходится выполнять несколько различных функций. Поэтому каждый вид работы определенным образом стандартизируется в виде **отдельного цикла**.
В частности, существуют циклы чтения, циклы записи, циклы прерывания и некоторые другие типы циклов шин.
По отношению к тактовым синхроимпульсам шины делятся на **синхронные** и **асинхронные**. У синхронных шин все действия цикла шины привязаны к определенным фазам синхроимпульса — началу, середине, концу и т. д. Они имеют строго определенную длительность, а цикл такой шины всегда занимает целое количество тактов. У асинхронных шин такая привязка отсутствует.

![[Pasted image 20240108234833.png]]
Рисунок 1 — Цикл чтения синхронной шины с одним тактом ожидания

![[Pasted image 20240108234918.png]]
Рисунок 2 — Цикл чтения асинхронной

Цепочка причинно-следственных связей цикла асинхронной шины в краткой форме выглядит следующим образом.
1. Стабилизация адреса вызывает формирование сигнала MEMR#.
2. Стабилизация сигнала MEMR# вызывает формирование сигнала BEG#.
3. Стабилизация сигнала BEG# запускает цикл памяти.
4. Стабилизация данных (завершение цикла памяти) вызывает формирование сигнала FIN#.
5. Стабилизация сигнала FIN# вызывает отключение сигналов BEG#, MEMR#, а также адресных линий.
6. Отключение сигнала BEG# вызывает отключение сигнала FIN# и освобождение линий данных.
Такая последовательность взаимосвязанных сигналов называется **полным квитированием** (от итал. quitanza — квитанция), так как каждое участвующее в обмене устройство как бы посылает и принимает квитанцию, заставляющую начать действие, или оповещающую о его завершении.
# Конвейерный режим работы шины

![[Pasted image 20240108235837.png]]
Рисунок 3 — Упрощённая схема конвейерного режима шины

Каждая строка — **транзакция**
Следует обратить внимание на то, что на начальных этапах одновременно выполняется меньшее количество фаз цикла: на первом этапе — только одна, на втором — две, на третьем — три. И только на четвертом этапе конвейер работает с полной нагрузкой. Этот период называется **заполнением конвейера**, он неизбежен в работе любого конвейера. Кроме периода заполнения конвейера существует еще и симметричный ему период **освобождения конвейера**, связанный с завершением запрошенных операций. Наличие периодов заполнения и освобождения, естественно, снижает эффективность конвейера.
# Основные типы шин
- Наиболее старыми, но до сих пор используемыми являются шины **ISA** (от Industry Standard Architecture — стандартная промышленная архитектура) и **EISA** (от Extended ISA — расширенная ISA). Это традиционные, дешевые и универсальные шины, служащие для подключения медленных внешних устройств, например таких как мышь и клавиатура, с тактовой частотой до 8 МГц и малой скоростью обмена — от 8 до 33 Мбайт/с. Шины ISA имели разрядности 8 и 16 бит, а шины EISA — 32 бита.
- Позднее появилась шина **PCI** (от Peripheral Component Interconnect — соединитель периферийных компонентов) — высокоскоростная шина для подсоединения дисковых и графических устройств со скоростью обмена до 500 Мбайт/с и тактовой частотой 66 МГц. Разрядности шин PCI — 64 и 128 бит.
- С 2004 г. в качестве перспективного стандарта, который должен прийти на смену шине PCI, рассматривается шина **РСI Express**. Для нее введена единица скорости передачи данных, равная 256 Мбайт/с. Уже выпущены шины этого стандарта, имеющие скорость передачи 16х, то есть 4 Гбайт/с.
- Шины **IDE** (от Integrated Drive Electronics — интегрированные электронные устройства) и **EIDE** (от Extended IDE — расширенная IDE). Это шины и одновременно стандарт (интерфейс) для подключения жестких, оптических дисков и мобильных дисководов со скоростью обмена до 20 Мбайт/с.
- Шина **SCSI** (от Small Computer System Interface — интерфейс малых вычисли- тельных систем). Это шина и стандарт, которые предназначены для подключения высокопроизводительных дисковых устройств со скоростью обмена до 80 Мбайт/с. Отметим, что шины SCSI дороже шин EIDE.
- Шина **AGP** (от Advanced Graphic Port — улучшенный графический порт). Это шина для подключения видеоплат со скоростью обмена от 256 Мбайт/с до 1,06 Гбайт/с. При этом скорость обмена 256 Мбайт/с считается условной единицей измерения. 
- Шина **USB** (от Universal Serial Bus — универсальная последовательная шина). Допускается одновременное подключение к такой шине до 127 внешних устройств (принтеров, сканеров, переносных запоминающих устройств и т. д.). Скорость обмена данными у шины доходит до 12 Мбайт/с, а у ее модификации USB 2.0 — до 60 Мбайт
- Шина **FireWire** (от fire wire — огненный провод), или **IЕЕЕ 1394**. Это шина и стандарт, предназначенные для подключения высокоскоростных внешних устройств типа цифровых фото- и видеокамер. Обеспечивается скорость обмена до 50 Мбайт/с.
# Синхронизация
Находящийся на материнской плате основной тактовый генератор компьютера вырабатывает высокостабильные импульсы, которые используются для синхронизации работы процессора, микросхем памяти, системной и всех остальных шин, а также разнообразных внешних устройств. В связи с этим частота импульсов, вырабатываемых тактовым генератором, называется **опорной**, или **базовой, частотой**. В литературе такую частоту иногда называют **Host Bus Clock**.
В первых моделях компьютеров IBM РС системная шина, процессор и микросхемы памяти работали на одной и той же опорной частоте тактового генератора. Это было неэффективно, так как более скоростные устройства должны были приспосабливаться к скорости самого медленного устройства.
В связи с широким внедрением параллелизма в архитектуру компьютеров оказалось более удобным и более производительным допустить работу различных устройств с различной тактовой частотой. А чтобы не вводить несколько тактовых генераторов, которые работают на разных частотах, но при этом занимают много лишнего места и к тому же нуждаются в дополнительной взаимной синхронизации, применили масштабирование одной и той же базовой частоты от одного тактового генератора. Для обладающих высокой скоростью работы микросхем процессоров применяется внутреннее умножение базовой частоты на некоторый числовой коэффициент, например на 2, 4, 6 и т. д. Эту частоту часто обозначают **CPU Clock** (частота центрального процессора) или **Соте Speed** (скорость ядра).