[[ЭВМ|<==]]
# Машинные команды процессора i8086
Каждому действию, принадлежащему системе команд процессора, ставится во взаимно однозначное соответствие двоичный код, который принято называть **кодом операции**(КОП). Данные, участвующие в выполнении действия, обычно называются **операндами**. Операнд может быть задан непосредственно к команде, он может находиться в регистре процессора или в поле оперативной памяти.
Каждая машинная команда характеризуется длиной, которая равна кол-ву байтов, занятых её кодом. Если машинная команда находится в поле ОП, то она характеризуется ещё и адресом, которым считается адрес этого поля.
Для описания структуры кода команды, так же как и для описания кодов данных используется понятие формат команды.
## Адресность машинных команд
Единственным обязательным элементом машинной команды является её код. Кроме того, в составе команды обычно имеется несколько операндов, которые задаются либо непосредственно, либо указанием их местоположения. Поскольку операнды в машинных командах чаще всего задаются определением их местоположения, соответствующий элемент кода команды принято называть **адресом**.
Наибольшее количество операндов имеют *четырехадресные* команды со структурой КОП А1 А2 А3 А4. Первый (А1) и второй (А2) адреса задают операнды, например слагаемые. Третий адрес (А3) определяет место, куда следует записать результат, а четвёртый операнд (А4) определяет адрес команды, которую процессор должен выполнить следующей.
## Способы адресации
Способы задания операндов в команде принято называть адресацией. Существует несколько десятков различных способов адресации, но, в принципе, все эти способы являются различными вариантами четырёх основных:
- *непосредственная адресация* означает, что сам операнд включается в машинную команду как её составная часть;
- *регистровая адресация* означает, что операнд находится в регистре процессора, а в команде указывается код этого регистра;
- *прямая адресация* означает, что операнд находится в поле ОП, а в команде указан адрес этого поля;
- *косвенная адресация* означает, что операнд также находится в поле ОП, а в команде содержаться некоторые элементы, по которым однозначно определяется адрес этого поля.
## Машинный и ассемблерный форматы команд
Запись команды в двоичном или шестнадцатеричном виде называется **машинным форматом** команды. Разработан специальных способ записи машинных команд в символьном виде, который намного удобнее для человека. Вместо 16-чных или 2-чных кодов в этом виде используются так называемые **мнемокоды**.
Запись команд с использование мнемокодов называется **ассемблерным форматом**.
Существуют программы, которые преобразуют мнемокоды в двоичный код. Общепринятым для такого рода программ является название **ассемблер**.
Программа-ассемблер как бы собирает, монтирует машинную программу на основании заданной программистом последовательности мнемокодов. Этот процесс принято называть **ассемблированием**, **компиляцией** или **трансляцией**.

Таблица 1. Фрагмент системы команд процессора i8086

| Название  | Мнемокод | Код операции                  | Характеристика                                                         |
| --------- | -------- | ----------------------------- | ---------------------------------------------------------------------- |
| Пересылка | mov      | 100010<br>1011<br>1100011;000 | Двухадресная<br>Непосредственная регистровая<br>Непосредственная общая |
| Сложение  | add      | 000000                        | Двухадресная                                                           |
| Вычитание | sub      | 001010                        | Двухадресная                                                           |


# Безадресные команды
Безадресные команды состоят только из кода операции. Они занимают **1 байт память**.

![[Pasted image 20240105020057.png|250]]

Таблица 2. Примеры безадресных команд

| Машинный формат           | Ассемблерный формат | Действие                         |
| ------------------------- | ------------------- | -------------------------------- |
| $01100000_2$    $60_{16}$ | pusha               | Записать всё регистры в стек     |
| $01100001_2$    $61_{16}$ | popa                | Выбрать всё из стека в регистры  |
| $11110000_2$    $F4_{16}$ | hlt                 | Остановить выполнение программы | 

# Одноадресные команды
В системе команд процессора i8086 предусмотрены два варианта одноадресных команд: регистровая — более простая, но с ограниченными возможностями и общая модификация.
## Регистровая модификация
Регистровая модификация одноадресных команд может оперировать только с двухбайтными операндами, которые, к тому же, могут находиться только в регистрах процессора. Эти команды всегда занимают **1 байт памяти**.

![[Pasted image 20240105020041.png]]

Таблица 3. Примеры одноадресных команд в регистровой модификации

| Машинный формат               | Ассемблерный формат | Действие     |
| ----------------------------- | ------------------- | ------------ |
| $01000$\|$001_2$    $41_{16}$ | inc cx              | cx := cx + 1 |
| $01001$\|$001_2$    $49_{16}$ | dec cx              | cx := cx - 1 |

## Общая модификация
Операнды одноадресных команд в общей модификации могут быть длиной как один, так и два байта, они могут находиться и в регистрах процессора, и в оперативной памяти.
Одноадресные команды в общей модификации могут иметь длину от **2 до 5 байтов**.

![[Pasted image 20240105020024.png]]

Структура обязательных байтов команды:
- КОП (7 битов) — код операции;
- $КОП_Д$ (3 бита) — дополнительный код операции;
- W (1 бит) — признак длины операнда, 0 — операнд однобайтовый, 1 — операнд двухбайтовый;
- mod (2 бита) — параметр, определяющий местоположение операнда;
- r/m (регистр/память, 3 бита) — параметр, уточняющий адресацию операнда.
Если $mod = 11_2$, то операнд находится в регистре процессора, и тогда параметр r/m определяет его код. В противном случае, при $mod \neq 11_2$, операнд находится в оперативной памяти, а параметр r/m уточняет способ косвенной адресации.