[[ЭВМ|<==]]
![[9#Элементы ассемблера процессора intel]]
# Арифметические операции
## Сложение и вычитание
Действия сложения и вычитания могут выполняться над 8- и 16-битовыми беззнаковыми и знаковыми целочисленными данными, которые могут находиться в регистрах процессора или в полях оперативной памяти. В некоторых случаях могут использоваться и непосредственные операнды. Команды процессора, связанные со сложением и вычитанием, приведены в табл. 1. В этой таблице p означает операнд — приемник результата, а i — второй участвующий в действии операнд.

Таблица 1. Команды сложения и вычитания процессора i8086

| Группа            | Название             | Команда    | Действие          |
| ----------------- | -------------------- | ---------- | ----------------- |
| Команды сложения  | Сложение             | `add p, i` | $p := p + i$      |
|                   | Сложение с переносом | `adc p, i` | $p := p + i + cf$ |
|                   | Инкремент            | `inc p`    | $p := p + 1$      |
| Команды вычитания | Вычитание            | `sub p, i` | $p := p - i$      |
|                   | Вычитание с займом   | `sbb p, i` | $p := p - i - cf$ | 
|                   | Декремент            | `dec p`    | $p := p - 1$      |
|                   | Изменение знака      | `neg p`    | $p := -p$         |
|                   | Сравнение            | `cmp p, i` | $p - i$           |


## Умножение и деление
В процессоре i8086 предусмотрены по два варианта команд деления и умножения. Это команды mul (от multiply — умножение) и div (от division — деление) для беззнаковых операндов, а также команды imul (от integer multiply) и idiv (от integer division) — для знаковых. Операнды команд умножения и деления могут быть как однобайтовыми так и двухбайтовыми.
### Беззнаковые операции
При беззнаковой трактовке в однобайтовом поле могут находиться коды чисел от $0$ до $255_{10}$ ($2^{8}-1$), а в двухбайтовом — от $0$ до $65535_{10}$ ($2^{16}-1$)
Умножение в процессоре i8086 организовано следующим образом. Если умножаются 8-битовые сомножители, то один из них до начала выполнения умножения должен быть записан в регистр **AL**. Адрес второго сомножителя указывается в команде умножения: `mul сомножетель`. Результат всегда записывается в регистр **AX**.
Очевидно, что для деления должна иметь место обратная ситуация. Делимое, которое, в частности, может быть результатом предшествующего умножения, должно быть до выполнения деления записано в 16-битовый регистр **AX**. 8-битовый делитель указывается в команде деления `div делитель`. Частное и остаток целочисленного деления, полученные в результате выполнения команды, всегда заносятся в регистр **AX**. При этом частное занимает регистр **AL**, а остаток от деления — регистр **AH**.
В связи с тем что регистры процессора i8086 16-битовые, а в результате умножения двух 16-битовых сомножителей произведение может потребовать 32 бита, разработчики процессора решили записывать такое произведение сразу в два регистра, **DX** и **AX**. При этом младшие 16 разрядов результата записываются в регистр **AX**, а старшие 16 разрядов — в регистр **DX**. Общая схема 16-битового умножения: один из сомножителей до выполнения команды необходимо записать в регистр **AX**. Адрес второго сомножителя указывается в команде умножения. 32-битовый результат занимает указанным ранее способом пару регистров **DX**:**AX**.
16-битовое деление организуется следующим образом. 32-битовое делимое до начала деления должно находиться в паре регистров **DX**:**AX**. Поскольку процессор i8086 относится к 16-битовой архитектуре, 32-битовые коды данных в таком процессоре большинством команд не воспринимаются и не формируются. В команде деления предполагается, что такое делимое получено в результате одной из предшествующих команд умножения или же сформировано с помощью специальных приемов. Адрес 16-битового делителя указывается в команде. Частное от деления занимает регистр **AX** процессора, а остаток от деления размещается в регистре **DX**.
### Знаковые операции
В целом выполнение умножения и деления imul и idiv для знаковых операндов происходит по тем же самым схемам, что и у беззнаковых. При этом имеется естественное отличие от беззнаковых команд в диапазоне операндов и результатов, соответствующих знаковым 8- и 16-битовым целым числам. Поэтому для проверки принадлежности результата допустимому диапазону используется не флажок **CF**, а флажок **OF**.
В процессорах Intel при выполнении целочисленного знакового деления действует правило, в соответствии с которым знак остатка всегда выбирается тем же самым, что и знак делимого.